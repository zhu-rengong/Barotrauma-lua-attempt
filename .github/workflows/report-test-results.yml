# yaml-language-server: $schema=https://json.schemastore.org/github-workflow.json

name: Report test results

# HACK: the "on-push-pr" workflow gets run with read-only perms.
# This workflow will run in our repo with write permissions after
# the PR checks are done running.
on:
  workflow_run:
    workflows:
      - On push to master branch
      - On push to a secondary branch
      - On push to a PR
    types: [completed]

jobs:
  report-test-results:
    runs-on: ubuntu-latest
    steps:
      - name: Report test results
        uses: dorny/test-reporter@c40d89d5e987cd80f3a32b3c233556e22bdca958 # v1.9.0
        with:
          name: Test results
          artifact: test-results
          path: test-results.trx
          fail-on-error: false
          reporter: dotnet-trx
